//+------------------------------------------------------------------+
//|                                                        Scalper.mq5|
//|                        Generated by MQL5 Wizard version 1.00      |
//|                   https://www.mql5.com                            |
//+------------------------------------------------------------------+
#include <Trade\Trade.mqh>
CTrade trade;

// Input parameters
input double LotSize = 0.1;
input double StopLoss = 10;
input double TakeProfit = 20;
input int MovingAveragePeriod = 14;
input double RSIThreshold = 70.0;
input double Slippage = 3;

// Global variables
double ma;
double rsi;

//+------------------------------------------------------------------+
//| Expert initialization function                                   |
//+------------------------------------------------------------------+
int OnInit()
  {
   // Print initialization message
   Print("Scalper EA initialized.");
   
   return(INIT_SUCCEEDED);
  }
//+------------------------------------------------------------------+
//| Expert deinitialization function                                 |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   // Print deinitialization message
   Print("Scalper EA deinitialized.");
  }
//+------------------------------------------------------------------+
//| Expert tick function                                             |
//+------------------------------------------------------------------+
void OnTick()
  {
   // Calculate moving average and RSI
   ma = iMA(NULL, 0, MovingAveragePeriod, 0, MODE_SMA, PRICE_CLOSE, 0);
   rsi = iRSI(NULL, 0, MovingAveragePeriod, PRICE_CLOSE, 0);

   // Buy condition: price above MA and RSI below threshold
   if (Close[0] > ma && rsi < RSIThreshold)
     {
      if (trade.Buy(LotSize, NULL, Ask, (Ask - StopLoss * _Point), (Ask + TakeProfit * _Point), "Scalper Buy"))
        Print("Buy order placed.");
      else
        Print("Buy order failed: ", GetLastError());
     }
   
   // Sell condition: price below MA and RSI above threshold
   if (Close[0] < ma && rsi > (100 - RSIThreshold))
     {
      if (trade.Sell(LotSize, NULL, Bid, (Bid + StopLoss * _Point), (Bid - TakeProfit * _Point), "Scalper Sell"))
        Print("Sell order placed.");
      else
        Print("Sell order failed: ", GetLastError());
     }
  }
//+------------------------------------------------------------------+
